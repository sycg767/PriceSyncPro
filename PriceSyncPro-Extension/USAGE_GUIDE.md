# PriceSyncPro 使用指南

## 🚀 快速开始

### 首次使用

1. **打开插件**
   - 在 New API 后台的任意页面点击浏览器工具栏中的 PriceSyncPro 图标
   - 插件会自动检测登录状态并显示提示

2. **输入配置**
   - **上游定价 URL**: 输入你的上游 API 定价接口地址
   - **模型前缀**: 可选，例如 `Zen/` 或 `OpenAI/`

3. **分析价格**
   - 点击 "🔍 开始分析上游价格" 按钮
   - 等待分析完成，查看计算结果

4. **同步到后台**
   - 点击 "🚀 一键同步到后台" 按钮
   - 确认后自动更新 New API 的价格配置

## ⚡ 快速更新功能（推荐）

### 使用场景
当你需要定期更新某个渠道的价格时，无需重复输入配置！

### 操作步骤
1. 打开插件
2. 点击绿色的 **"⚡ 快速更新（使用上次配置）"** 按钮
3. 自动加载上次配置并开始分析
4. 完成后点击同步即可

### 提示信息
- 按钮会显示上次使用的时间，例如：
  - `上次配置: Zen/ (3分钟前)`
  - `上次配置: 无前缀 (1小时前)`

## 💾 配置预设管理

### 保存预设
1. 输入 URL 和前缀
2. 点击 **💾** 按钮（在"配置预设"标签右侧）
3. 输入预设名称，例如：`OpenAI渠道` 或 `Claude官方`
4. 点击确定保存

### 使用预设
1. 点击"配置预设"下拉框
2. 选择已保存的预设
3. URL 和前缀会自动填充

### 管理预设
1. 点击"配置预设"下拉框
2. 选择 **"⚙️ 管理预设..."**
3. 在弹出的对话框中输入要删除的预设编号
4. 确认删除

## 📊 功能按钮说明

### 🔍 开始分析上游价格
- 获取上游定价数据
- 自动推断基础价格
- 计算所有模型的价格
- 显示计算结果表格

### 🚀 一键同步到后台
- 将计算结果直接同步到 New API 后台
- 智能合并配置（只更新当前前缀的模型）
- 保留其他前缀的现有配置

### 📋 生成并复制 SQL
- 生成完整的 SQL UPDATE 语句
- 自动复制到剪贴板
- 可用于手动数据库更新

## 💡 使用技巧

### 技巧 1：多渠道管理
为每个上游渠道保存一个预设：
```
预设1: "OpenAI官方" - https://api1.com/pricing | OAI/
预设2: "Claude渠道" - https://api2.com/pricing | Claude/
预设3: "Gemini镜像" - https://api3.com/pricing | Google/
```

需要更新哪个就选择对应预设！

### 技巧 2：定期价格同步
每天早上打开插件：
1. 点击"快速更新"⚡
2. 等待分析完成
3. 点击"同步到后台"
4. 完成！

### 技巧 3：批量更新多个渠道
```
1. 选择预设A → 快速更新 → 同步
2. 选择预设B → 快速更新 → 同步
3. 选择预设C → 快速更新 → 同步
```

## ⚠️ 注意事项

1. **必须先登录**
   - 确保已登录 New API 后台
   - 在 New API 页面打开插件

2. **网络连接**
   - 确保能访问上游 API
   - 检查 CORS 设置

3. **数据备份**
   - 建议在同步前导出一次 SQL 作为备份
   - 可以随时通过 SQL 恢复配置

## 🔧 故障排查

### 问题：提示"请先登录"
**解决**：
1. 确认已登录 New API 后台
2. 刷新 New API 页面
3. 重新打开插件

### 问题：分析失败
**解决**：
1. 检查上游 URL 是否正确
2. 在浏览器中直接访问该 URL 确认数据格式
3. 查看浏览器控制台的错误信息

### 问题：同步失败
**解决**：
1. 确认 New API 后台登录状态
2. 检查网络连接
3. 尝试先生成 SQL，手动执行

### 问题：快速更新按钮禁用
**原因**：没有历史配置

**解决**：先手动分析一次，系统会自动保存配置

## 📱 界面说明

### 状态指示器
- ✅ 绿色：成功/已登录
- ⚠️ 橙色：警告/未登录
- ❌ 红色：错误

### 按钮状态
- 亮色可点击：功能可用
- 暗色不可点击：需要先完成前置步骤

## 🎯 最佳实践

1. **首次使用时保存预设**
   - 避免重复输入

2. **使用描述性的预设名称**
   - 例如：`Claude官方-高质量` 而不是 `配置1`

3. **定期更新价格**
   - 利用"快速更新"功能
   - 建议每天或每周更新一次

4. **多渠道分离管理**
   - 每个渠道使用不同的前缀
   - 避免配置冲突

## 📞 技术支持

如遇问题，请检查：
1. Chrome 扩展管理页面的错误日志
2. 浏览器控制台（F12）的错误信息
3. New API 后台的日志

---

**版本**: v2.0
**更新日期**: 2025-11-04
**新功能**: 配置预设系统 + 快速更新功能